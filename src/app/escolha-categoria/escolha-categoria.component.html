<div class="container">
  <!-- Botão voltar -->
  <button class="btn-voltar" (click)="voltarParaHome()">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
      <path d="m15 18-6-6 6-6"/>
    </svg>
    Voltar
  </button>

  <!-- Header -->
  <div class="header">
    <h1 class="titulo">
      <span class="letra roxo">Escolha</span>
      <span class="letra roxo">a</span>
      <span class="letra roxo">Categoria</span>
    </h1>
    <p class="subtitulo">Navegue pelas categorias musicais</p>
  </div>

  <!-- Loading -->
  <div *ngIf="carregandoCategorias()" class="loading-container">
    <div class="loading-spinner"></div>
    <p class="loading-texto">Carregando categorias...</p>
  </div>

  <!-- Grid de categorias -->
  <div *ngIf="!carregandoCategorias()" class="categorias-grid">
    <div 
      *ngFor="let categoria of categorias(); let i = index"
      class="card-categoria"
      [style.background]="obterGradiente(categoria.nome_categoria)"
      [style.animation-delay.ms]="i * 50"
      (click)="abrirCategoria(categoria)"
    >
      <div class="categoria-icone">{{ obterIcone(categoria.nome_categoria) }}</div>
      <h3 class="categoria-nome">{{ categoria.nome_categoria }}</h3>
    </div>
  </div>

  <!-- Modal de músicas -->
  <div *ngIf="modalAberto()" class="modal-overlay" (click)="fecharModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <!-- Header do modal -->
      <div class="modal-header">
        <div class="modal-info">
          <div class="modal-icone">
            {{ obterIcone(categoriaSelecionada()?.nome_categoria || '') }}
          </div>
          <h2 class="modal-titulo">{{ categoriaSelecionada()?.nome_categoria }}</h2>
        </div>
        <button class="btn-fechar" (click)="fecharModal()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>

      <!-- Loading das músicas -->
      <div *ngIf="carregandoMusicas()" class="modal-loading">
        <div class="loading-spinner-small"></div>
        <p>Carregando músicas...</p>
      </div>

      <!-- Lista de músicas -->
      <div *ngIf="!carregandoMusicas()" class="modal-body">
        <div *ngIf="musicas().length === 0" class="vazio">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 18V5l12-2v13"></path>
            <circle cx="6" cy="18" r="3"></circle>
            <circle cx="18" cy="16" r="3"></circle>
          </svg>
          <p>Nenhuma música encontrada nesta categoria</p>
        </div>

        <div *ngIf="musicas().length > 0" class="lista-musicas">
          <div 
            *ngFor="let musica of musicas(); let i = index" 
            class="item-musica"
            [style.animation-delay.ms]="i * 30"
          >
            <div class="musica-numero">{{ i + 1 }}</div>
            <div class="musica-detalhes">
              <h4 class="musica-titulo">{{ musica.titulo }}</h4>
            </div>
            <div class="musica-codigo">
              <span class="codigo-label">Código</span>
              <span class="codigo-valor">{{ musica.codigo_musica }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Efeito de fundo -->
  <div class="efeito-fundo"></div>
</div>
