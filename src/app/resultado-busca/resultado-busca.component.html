<div class="container">
  <!-- Header com botão voltar -->
  <header class="header">
    <button class="btn-voltar" (click)="voltarParaHome()">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        <path d="m15 18-6-6 6-6"/>
      </svg>
      Voltar
    </button>

    <div class="termo-buscado">
      <span class="label">Buscando por:</span>
      <span class="termo">"{{ termoBusca }}"</span>
    </div>
  </header>

  <!-- Loading -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="loading-spinner"></div>
    <p class="loading-texto">Procurando músicas...</p>
  </div>

  <!-- Erro de carregamento -->
  <div *ngIf="erroCarregamento && !isLoading" class="erro-container">
    <svg class="icone-erro" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="12" cy="12" r="10"></circle>
      <line x1="12" y1="8" x2="12" y2="12"></line>
      <line x1="12" y1="16" x2="12.01" y2="16"></line>
    </svg>
    <h2 class="erro-titulo">Erro ao buscar músicas</h2>
    <p class="erro-texto">Não foi possível conectar ao servidor. Tente novamente.</p>
    <button class="btn-tentar-novamente" (click)="realizarBusca()">
      Tentar Novamente
    </button>
  </div>

  <!-- Nenhum resultado -->
  <div *ngIf="nenhumResultado && !isLoading && !erroCarregamento" class="vazio-container">
    <svg class="icone-vazio" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="11" cy="11" r="8"></circle>
      <path d="m21 21-4.35-4.35"></path>
      <line x1="8" y1="11" x2="14" y2="11"></line>
    </svg>
    <h2 class="vazio-titulo">Nenhuma música encontrada</h2>
    <p class="vazio-texto">Tente buscar por outro termo ou verifique a ortografia.</p>
    <button class="btn-nova-busca" (click)="novaBusca()">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.35-4.35"></path>
      </svg>
      Nova Busca
    </button>
  </div>

  <!-- Lista de resultados -->
  <div *ngIf="musicas.length > 0 && !isLoading" class="resultados-container">
    <div class="resultados-header">
      <h2 class="resultados-titulo">
        {{ musicas.length }} 
        {{ musicas.length === 1 ? 'música encontrada' : 'músicas encontradas' }}
      </h2>
    </div>

    <div class="lista-musicas">
      <div *ngFor="let musica of musicas; let i = index" 
           class="card-musica"
           [style.animation-delay.ms]="i * 50">
        <!-- Informações da música -->

        <!-- Número da posição -->
        <div class="numero-posicao">{{ i + 1 }}</div>

        <!-- Informações da música -->
        <div class="musica-info">
          <h3 class="musica-titulo" [innerHTML]="destacarTermo(musica.titulo)"></h3>
          <p class="musica-codigo">
            <svg class="icone-codigo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="16 18 22 12 16 6"></polyline>
              <polyline points="8 6 2 12 8 18"></polyline>
            </svg>
            Código: <strong>{{ musica.codigo_musica }}</strong>
          </p>
        </div>

        <!-- Botão copiar código -->
        <button class="btn-copiar" 
                (click)="copiarCodigo(musica.codigo_musica, $event)"
                title="Copiar código">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
          </svg>
          <span class="btn-copiar-texto">Copiar</span>
          <span class="btn-copiado-texto">Copiado!</span>
        </button>
      </div>
    </div>

    <!-- Botão nova busca no final -->
    <div class="rodape-resultados">
      <button class="btn-nova-busca-rodape" (click)="novaBusca()">
        Fazer Nova Busca
      </button>
    </div>
  </div>

  <!-- Efeito de fundo -->
  <div class="efeito-fundo"></div>
</div>


